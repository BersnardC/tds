(this.webpackJsonpaa_cliente=this.webpackJsonpaa_cliente||[]).push([[0],{102:function(e,t,a){e.exports=a(243)},107:function(e,t,a){},243:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(25),i=a.n(o),s=(a(107),a(19)),d=a(10),c=a(22),l=a(20),u=a(26),m=a.n(u),p=a(99),_=a(9),g=a(29),f=a(30),v=a(32),b=a(31),h=a(33),x=a.n(h),y=a(244);function E(){var e=Object(s.a)(["\n  {\n    orders(where: {trade_id: {_eq: 266}}, order_by: {trade_date: asc, time: asc}) {\n      id\n      strike\n      time\n      trade_date\n      call_put\n      action\n      exp_date\n      price\n      is_open\n    }\n  }\n"]);return E=function(){return e},e}var O=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(e){var r;return Object(g.a)(this,a),(r=t.call(this,e)).state={componentMounted:!1,columns:[{dataField:"id",text:"ID"},{dataField:"symbol",text:"Symbol"},{dataField:"strike",text:"Strike"},{dataField:"exp_date",text:"Exp Date"},{dataField:"trade_date",text:"Date"},{dataField:"time",text:"Time"},{dataField:"price",text:"Price"},{dataField:"quantity",text:"Quantity"},{dataField:"value",text:"Value"},{dataField:"current_pnl",text:"Current PnL"}],products:[]},r}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.state.componentMounted=!0,console.log(this.state.componentMounted)}},{key:"componentWillUnmount",value:function(){console.log("Chao")}},{key:"UNSAFE_componentWillUpdate",value:function(){console.log("LLegue aqui")}},{key:"render",value:function(){var e=this;return n.a.createElement(y.a,{query:S},(function(t){var a=t.loading,r=t.error,o=t.data;return a?n.a.createElement("div",null,"Buscando data"):r?n.a.createElement("div",null,"Ha ocurrido un error: ",r):o?(e.state.products=o.orders,n.a.createElement("div",{className:"container"},n.a.createElement(x.a,{keyField:"id",data:e.state.products,columns:e.state.columns}))):void 0}))}}]),a}(n.a.Component),S=Object(c.b)(E()),F=O,k=a(49),j=a.n(k),q=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){return n.a.createElement("tr",{key:this.props.id},n.a.createElement("td",null," ",this.props.data.strike," "),n.a.createElement("td",null," ",this.props.data.exp_date))}}]),a}(r.Component);function w(){var e=Object(s.a)(["\n  {\n    orders(where: {trade_id: {_eq: 266}}, order_by: {trade_date: asc, time: asc}) {\n      id\n      strike\n      time\n      trade_date\n      call_put\n      action\n      exp_date\n      price\n      is_open\n    }\n  }\n"]);return w=function(){return e},e}var I=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){return n.a.createElement(y.a,{query:N},(function(e){var t=e.loading,a=e.error,r=e.data;if(t)return n.a.createElement("div",null,"Fetching");if(a)return n.a.createElement("div",null,"Error");console.log(r);var o=r.orders;return n.a.createElement("div",null,o.map((function(e){return console.log(e),n.a.createElement(q,{key:e.id,id:e.id,link:e.call_put,data:e})})))}))}}]),a}(r.Component),N=j()(w()),D=I,J=a(52),P=a(97);function Y(){var e=Object(s.a)(['\n\t  {\n\t    intraday_price_action(where: {strike: {_eq: "','"}, call_put: {_eq: "','"}, date_time: {_gte: "','"}, _and: {date_time: {_lte: "','"}}}, order_by: {trade_date: asc, time: asc}) {\n\t      trade_date\n\t      time\n\t      call_put\n\t      exp_date\n\t      close\n\t    }\n\t  }\n\t']);return Y=function(){return e},e}function C(){var e=Object(s.a)(["\n  {\n    orders(where: {trade_id: {_eq: 266}}, order_by: {trade_date: asc, time: asc}) {\n      \tid\n      \tstrike\n     \ttime\n      \ttrade_date\n      \tcall_put\n      \taction\n      \texp_date\n     \tprice\n      \tis_open,\n    \tquantity\n    }\n  }\n"]);return C=function(){return e},e}function L(e){var t=Object(r.useState)({xcolumns:[{dataField:"id",text:"ID"},{dataField:"symbol",text:"Symbol"},{dataField:"strike",text:"Strike"},{dataField:"exp_date",text:"Exp Date"},{dataField:"trade_date",text:"Date"},{dataField:"time",text:"Time"},{dataField:"price",text:"Price"},{dataField:"call_put",text:"Call/Put"},{dataField:"quantity",text:"Quantity"},{dataField:"position",text:"Position"},{dataField:"value",text:"Value"},{dataField:"accum_value",text:"Accum Value"},{dataField:"current_pnl",text:"Current PnL"}],xorders:[]}),a=Object(J.a)(t,2),o=a[0],i=(a[1],sessionStorage.getItem("groups_ready")?JSON.parse(sessionStorage.getItem("groups_ready")):[]);i.includes(e.name)||i.push(e.name),sessionStorage.setItem("groups_ready",JSON.stringify(i));var s=e.orders[0],d=e.orders.length,c=e.orders[d-1],u="CALL"===s.call_put?"C":"P",m=s.trade_date+" "+s.time,p=s.trade_date+" "+c.time,_=Object(l.c)(T(s.strike,u,m,p)),g=_.loading,f=_.error,v=_.data;if(g)return n.a.createElement("p",null,"Loading...");if(f)return n.a.createElement("p",null,"Error :(");if(v){for(var b=v.intraday_price_action,h=0;h<d;h++)if(""===e.orders[h].price)for(var y=e.orders[h].time.substring(5,0)+":00",E=e.orders[h].trade_date+" "+y,O=b.length,S=0;S<O;S++){if(E==b[S].trade_date+" "+b[S].time){e.orders[h].price=b[S].close;break}}var F=JSON.parse(sessionStorage.getItem("dtimes_process")),k=JSON.parse(sessionStorage.getItem("dt_orders_process"));console.log("DTO",k);sessionStorage.getItem("dt_groups_process");var j=0,q=0,w=function(t){if(!o.xorders.includes(e.orders[t])){"Sell"==e.orders[t].action&&(e.orders[t].quantity=-1*e.orders[t].quantity);var a=e.orders[t].price*e.orders[t].quantity;e.orders[t].value=a,q+=e.orders[t].value,e.orders[t].accum_value=q.toFixed(2),j+=e.orders[t].quantity,e.orders[t].position=j;var r=e.orders[t].price*e.orders[t].position-e.orders[t].accum_value;e.orders[t].current_pnl=r.toFixed(2),o.xorders.push(e.orders[t]);var n=e.orders[t].trade_date+" "+e.orders[t].time.substring(5,0);F.includes(n)||F.push(n),k.some((function(a){return a.id==e.orders[t].id}))||k.push(e.orders[t])}};for(var I in e.orders)w(I);return sessionStorage.setItem("dtimes_process",JSON.stringify(F)),sessionStorage.setItem("dt_orders_process",JSON.stringify(k)),n.a.createElement("div",{className:"container"},n.a.createElement(x.a,{keyField:e.name,data:o.xorders,columns:o.xcolumns}),n.a.createElement(M,{current:e.name}))}}function M(e){var t=Object(r.useState)({ycolumns:[{dataField:"date",text:"Date"},{dataField:"time",text:"Time"},{dataField:"running_pnl",text:"Running PnL"}],xrows:[],labels:[],datasets:[{label:"Running PnL",fill:!0,lineTension:0,backgroundColor:"rgba(0,128,0,0.5)",borderColor:"rgba(0,0,0,1)",borderWidth:1,data:[]}]}),a=Object(J.a)(t,2),o=a[0],i=(a[1],!1),s=JSON.parse(sessionStorage.getItem("groups_ready")),d=(sessionStorage.getItem("dt_groups_process"),s.indexOf(e.current));if(console.log(e.current,d),d==s.length-1&&(i=!0),i){var c=JSON.parse(sessionStorage.getItem("dtimes_process")),l=JSON.parse(sessionStorage.getItem("dt_orders_process"));o.labels=c;for(var u=c.length,m=0;m<u;m++){for(var p=l.length,_=0,g=0;g<p;g++){l[g].trade_date+" "+l[g].time.substring(5,0)==c[m]&&(_+=parseFloat(l[g].current_pnl))}var f=c[m].split(" "),v={date:f[0],time:f[1],running_pnl:100*_.toFixed(2)};o.xrows.push(v),o.datasets[0].data.push(v.running_pnl)}return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement("h2",null,"Resume"),n.a.createElement(x.a,{keyField:e.name+"r",data:o.xrows,columns:o.ycolumns})),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("div",null,n.a.createElement(P.a,{data:o,options:{title:{display:!0,text:"Average Running PnL",fontSize:20},legend:{display:!0,position:"bottom"}}}))))}return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12"},n.a.createElement("hr",null)))}var H=Object(c.b)(C()),T=function(e,t,a,r){return Object(c.b)(Y(),e,t,a,r)},G=function(){var e=Object(r.useState)({orders:[],columns:[{dataField:"id",text:"ID"},{dataField:"symbol",text:"Symbol"},{dataField:"strike",text:"Strike"},{dataField:"exp_date",text:"Exp Date"},{dataField:"trade_date",text:"Date"},{dataField:"time",text:"Time"},{dataField:"price",text:"Price"},{dataField:"call_put",text:"Call/Put"},{dataField:"quantity",text:"Quantity"},{dataField:"value",text:"Value"},{dataField:"current_pnl",text:"Current PnL"}],groups:[],dataGroups:{},filldata:{},iPrices:[]}),t=Object(J.a)(e,2),a=t[0],o=(t[1],Object(l.a)());return Object(r.useEffect)((function(){o.query({query:T("700","C","2020-01-30T15:43:08Z","2020-01-30T15:49:08Z")}).then((function(e){a.iPrices=e.data.intraday_price_action})).catch((function(e){return console.error(e)}))})),n.a.createElement(y.a,{query:H},(function(e){var t=e.loading,r=e.error,o=e.data;if(t)return n.a.createElement("div",null,"Buscando data");if(r)return n.a.createElement("div",null,"Ha ocurrido un error: ",r);if(o){var i=sessionStorage.getItem("dtimes_process")&&JSON.parse(sessionStorage.getItem("dtimes_process")).length?JSON.parse(sessionStorage.getItem("dtimes_process")):[],s=sessionStorage.getItem("dt_orders_process")&&JSON.parse(sessionStorage.getItem("dt_orders_process")).length?JSON.parse(sessionStorage.getItem("dt_orders_process")):[];sessionStorage.setItem("dtimes_process",JSON.stringify(i)),sessionStorage.setItem("dt_orders_process",JSON.stringify(s)),a.orders=o.orders;for(var d=o.orders.length,c=0;c<d;c++){var l=a.orders[c].strike+a.orders[c].exp_date+a.orders[c].call_put;a.groups.includes(l)||a.groups.push(l),a.dataGroups.hasOwnProperty(l)||(a.dataGroups[l]=[]),a.dataGroups[l].push(a.orders[c])}var u=a.groups.length;sessionStorage.setItem("dt_groups_process",u);for(var p=0;p<u;p++){var _=a.dataGroups[a.groups[p]];if(a.filldata[a.groups[p]]=[],_.length)for(var g=m()(_[0].trade_date+" "+_[0].time,"DD-MM-YYYY HH:mm:ss"),f=m()(_[u-1].trade_date+" "+_[u-1].time,"DD-MM-YYYY HH:mm:ss").diff(g,"minutes"),v=1;v<f;v++){var b=m()(_[0].time,"h:m:s").add(v,"minutes").format("HH:mm:ss"),h={id:_[0].id+"."+v,strike:_[0].strike,action:_[0].action,call_put:_[0].call_put,exp_date:_[0].exp_date,price:"",is_open:_[0].is_open,trade_date:_[0].trade_date,time:b,quantity:0};a.filldata[a.groups[p]].push(h)}}for(var y=0;y<u;y++){var E=a.dataGroups[a.groups[y]].concat(a.filldata[a.groups[y]]);E.sort((function(e,t){return new Date(e.trade_date+" "+e.time)-new Date(t.trade_date+" "+t.time)})),a.dataGroups[a.groups[y]]=E}return a.iPrices.length?n.a.createElement("div",{className:"container"},a.groups.map((function(e){return n.a.createElement(x.a,{keyField:e,data:a.dataGroups[e],columns:a.columns})}))):n.a.createElement("div",{className:"container"},a.groups.map((function(e){return n.a.createElement(L,{name:e,orders:a.dataGroups[e]})})))}}))};function A(){var e=Object(s.a)(["\n        {\n          orders(where: {trade_id: {_eq: 266}}, order_by: {trade_date: asc, time: asc}) {\n            id\n            strike\n            time\n            trade_date\n            call_put\n            action\n            exp_date\n            price\n            is_open\n          }\n        }\n      "]);return A=function(){return e},e}function W(){var e=Object(s.a)(['\n  {\n    intraday_price_action(where: {strike: {_eq: "','"}, call_put: {_eq: "','"}, date_time: {_gte: "','"}, _and: {date_time: {_lte: "','"}}}, order_by: {trade_date: asc, time: asc}) {\n      trade_date\n      time\n      call_put\n      exp_date\n      close\n    }\n  }\n']);return W=function(){return e},e}function B(){var e=Object(s.a)(["\n  {\n    orders(where: {trade_id: {_eq: 266}}, order_by: {trade_date: asc, time: asc}) {\n      id\n      strike\n      time\n      trade_date\n      call_put\n      action\n      exp_date\n      price\n      is_open\n    }\n  }\n"]);return B=function(){return e},e}var R=new c.a({uri:"https://auto-alpha-db.herokuapp.com/v1/graphql"}),V=Object(c.b)(B());function Z(){var e=Object(l.c)(V),t=e.loading,a=e.error,r=e.data;if(t)return n.a.createElement("p",null,"Loading...");if(a)return n.a.createElement("p",null,"Error :(");console.log(r);var o=m()("20/06/2020 12:00:00","DD/MM/YYYY HH:mm:ss"),i=m()("25/06/2020 12:00:00","DD/MM/YYYY HH:mm:ss");return console.log(i.diff(o,"minutes")),n.a.createElement("h2",null,"About")}function Q(){return R.query({query:Object(c.b)(A())}).then((function(e){return console.log(e)})).catch((function(e){return console.error(e)})),n.a.createElement("h2",null,"Welcome")}function U(){var e,t,a,r,o=Object(l.c)((e="700",t="C",a="2020-01-30T15:43:08Z",r="2020-01-30T15:49:08Z",Object(c.b)(W(),e,t,a,r))),i=o.loading,s=o.error,d=o.data;return i?n.a.createElement("p",null,"Loading..."):s?n.a.createElement("p",null,"Error :("):(console.log("Data 2",d),n.a.createElement("h2",null,"About2"))}var z=function(){return n.a.createElement(d.a,{client:R},n.a.createElement("div",null,n.a.createElement(p.a,null,n.a.createElement(_.c,null,n.a.createElement(_.a,{exact:!0,path:"/",component:F}),n.a.createElement(_.a,{path:"/tables",component:G}),n.a.createElement(_.a,{path:"/about",component:Z}),n.a.createElement(_.a,{path:"/about2",component:U}),n.a.createElement(_.a,{path:"/welcome",component:Q}),n.a.createElement(_.a,{path:"/links",component:D})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(240);i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[102,1,2]]]);
//# sourceMappingURL=main.ad3bac85.chunk.js.map