(this.webpackJsonpaa_cliente=this.webpackJsonpaa_cliente||[]).push([[0],{102:function(e,t,r){e.exports=r(245)},107:function(e,t,r){},238:function(e,t,r){},241:function(e,t,r){},245:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(30),i=r.n(o),s=(r(107),r(15)),d=r(10),l=r(18),c=r(17),u=r(25),m=r.n(u),p=r(34),_=r(9),g=r(26),f=r(27),v=r(29),b=r(28),y=r(31),h=r.n(y),E=r(246);function x(){var e=Object(s.a)(["\n  {\n    orders(where: {trade_id: {_eq: 266}}, order_by: {trade_date: asc, time: asc}) {\n      id\n      strike\n      time\n      trade_date\n      call_put\n      action\n      exp_date\n      price\n      is_open\n    }\n  }\n"]);return x=function(){return e},e}var O=function(e){Object(v.a)(r,e);var t=Object(b.a)(r);function r(e){var a;return Object(g.a)(this,r),(a=t.call(this,e)).state={componentMounted:!1,columns:[{dataField:"id",text:"ID"},{dataField:"symbol",text:"Symbol"},{dataField:"strike",text:"Strike"},{dataField:"exp_date",text:"Exp Date"},{dataField:"trade_date",text:"Date"},{dataField:"time",text:"Time"},{dataField:"price",text:"Price"},{dataField:"quantity",text:"Quantity"},{dataField:"value",text:"Value"},{dataField:"current_pnl",text:"Current PnL"}],products:[]},a}return Object(f.a)(r,[{key:"componentDidMount",value:function(){this.state.componentMounted=!0,console.log(this.state.componentMounted)}},{key:"componentWillUnmount",value:function(){console.log("Chao")}},{key:"UNSAFE_componentWillUpdate",value:function(){console.log("LLegue aqui")}},{key:"render",value:function(){var e=this;return n.a.createElement(E.a,{query:F},(function(t){var r=t.loading,a=t.error,o=t.data;return r?n.a.createElement("div",null,"Buscando data"):a?n.a.createElement("div",null,"Ha ocurrido un error: ",a):o?(e.state.products=o.orders,n.a.createElement("div",{className:"container"},n.a.createElement(h.a,{keyField:"id",data:e.state.products,columns:e.state.columns}))):void 0}))}}]),r}(n.a.Component),F=Object(l.b)(x()),S=O,j=r(36),k=r(69);r(238);function I(){var e=Object(s.a)(["\n\t  {\n\t    trades {\n\t    \tid\n\t      \tid_reference\n\t      \tsymbol {\n\t\t      symbol\n\t\t    }\n\t      \treturn_dollar\n\t      \treturn_percentage\n\t      \topen_date\n    \t\tclose_date\n\t    }\n\t  }\n\t"]);return I=function(){return e},e}var D=function(){return Object(l.b)(I())},N=function(){var e=Object(a.useState)({trows:[],columns:[{dataField:"id",text:"ID"},{dataField:"id_reference",text:"Reference ID"},{dataField:"symbol_display",text:"Symbol"},{dataField:"return_dollar",text:"Return Dollar"},{dataField:"return_percentage",text:"Return Percentage"},{dataField:"open_date",text:"Open Date"},{dataField:"close_date",text:"Close Date"}]}),t=Object(j.a)(e,2),r=t[0],o=(t[1],Object(_.f)()),i={onClick:function(e,t,r){var a={return_dollar:t.return_dollar,id_reference:t.id_reference,return_percentage:t.return_percentage};sessionStorage.setItem("trad_info",JSON.stringify(a)),o.push("/orders/"+t.id)}};return Object(a.useEffect)((function(){})),n.a.createElement(E.a,{query:D()},(function(e){var t=e.loading,a=e.error,o=e.data;if(t)return n.a.createElement("div",null,"Buscando data");if(a)return n.a.createElement("div",null,"Ha ocurrido un error: ",a);if(o){console.log(o);var s=o.trades,d=s.length;console.log("Ntrades",d);for(var l=0;l<d;l++)s[l].symbol_display=s[l].symbol.symbol,r.trows.push(s[l]);return n.a.createElement("div",{className:"container"},n.a.createElement("h4",null,"Trades List"),n.a.createElement(h.a,{keyField:"trade_tbl",data:r.trows,columns:r.columns,rowEvents:i}))}}))},w=r(51),q=r.n(w),J=function(e){Object(v.a)(r,e);var t=Object(b.a)(r);function r(){return Object(g.a)(this,r),t.apply(this,arguments)}return Object(f.a)(r,[{key:"render",value:function(){return n.a.createElement("tr",{key:this.props.id},n.a.createElement("td",null," ",this.props.data.strike," "),n.a.createElement("td",null," ",this.props.data.exp_date))}}]),r}(a.Component);function P(){var e=Object(s.a)(["\n  {\n    orders(where: {trade_id: {_eq: 266}}, order_by: {trade_date: asc, time: asc}) {\n      id\n      strike\n      time\n      trade_date\n      call_put\n      action\n      exp_date\n      price\n      is_open\n    }\n  }\n"]);return P=function(){return e},e}var C=function(e){Object(v.a)(r,e);var t=Object(b.a)(r);function r(){return Object(g.a)(this,r),t.apply(this,arguments)}return Object(f.a)(r,[{key:"render",value:function(){return n.a.createElement(E.a,{query:L},(function(e){var t=e.loading,r=e.error,a=e.data;if(t)return n.a.createElement("div",null,"Fetching");if(r)return n.a.createElement("div",null,"Error");console.log(a);var o=a.orders;return n.a.createElement("div",null,o.map((function(e){return console.log(e),n.a.createElement(J,{key:e.id,id:e.id,link:e.call_put,data:e})})))}))}}]),r}(a.Component),L=q()(P()),Y=C;r(241);function M(){var e=Object(s.a)(['\n\t  {\n\t    intraday_price_action(where: {strike: {_eq: "','"}, call_put: {_eq: "','"}, date_time: {_gte: "','"}, _and: {date_time: {_lte: "','"}}}, order_by: {trade_date: asc, time: asc}) {\n\t      trade_date\n\t      time\n\t      call_put\n\t      exp_date\n\t      close\n\t    }\n\t  }\n\t']);return M=function(){return e},e}function H(){var e=Object(s.a)(["\n\t  {\n\t    orders(where: {trade_id: {_eq: ","}}, order_by: {trade_date: asc, time: asc}) {\n\t      \tid\n\t      \tstrike\n\t     \ttime\n\t      \ttrade_date\n\t      \tcall_put\n\t      \taction\n\t      \texp_date\n\t     \tprice\n\t      \tis_open\n\t    \tquantity\n\t    }\n\t  }\n\t"]);return H=function(){return e},e}function T(e){var t=Object(a.useState)({xcolumns:[{dataField:"id",text:"ID"},{dataField:"symbol",text:"Symbol"},{dataField:"strike",text:"Strike"},{dataField:"exp_date",text:"Exp Date"},{dataField:"trade_date",text:"Date"},{dataField:"time",text:"Time"},{dataField:"price",text:"Price"},{dataField:"call_put",text:"Call/Put"},{dataField:"quantity",text:"Quantity"},{dataField:"position",text:"Position"},{dataField:"value",text:"Value"},{dataField:"accum_value",text:"Accum Value"},{dataField:"current_pnl",text:"Current PnL"}],xorders:[]}),r=Object(j.a)(t,2),o=r[0],i=(r[1],sessionStorage.getItem("groups_ready")?JSON.parse(sessionStorage.getItem("groups_ready")):[]);i.includes(e.name)||i.push(e.name),sessionStorage.setItem("groups_ready",JSON.stringify(i));var s=e.orders[0],d=e.orders.length,l=e.orders[d-1],u="CALL"===s.call_put?"C":"P",m=s.trade_date+" "+s.time,p=s.trade_date+" "+l.time,_=Object(c.c)(W(s.strike,u,m,p)),g=_.loading,f=_.error,v=_.data;if(g)return n.a.createElement("p",null,"Loading...");if(f)return n.a.createElement("p",null,"Error :(");if(v){for(var b=v.intraday_price_action,y=0;y<d;y++)if(""===e.orders[y].price)for(var E=e.orders[y].time.substring(5,0)+":00",x=e.orders[y].trade_date+" "+E,O=b.length,F=0;F<O;F++){if(x==b[F].trade_date+" "+b[F].time){e.orders[y].price=b[F].close;break}}var S=JSON.parse(sessionStorage.getItem("dtimes_process")),k=JSON.parse(sessionStorage.getItem("dt_orders_process"));console.log("DTO",k);sessionStorage.getItem("dt_groups_process");var I=0,D=0,N=function(t){if(!o.xorders.includes(e.orders[t])){"Sell"==e.orders[t].action&&(e.orders[t].quantity=-1*e.orders[t].quantity);var r=e.orders[t].price*e.orders[t].quantity;e.orders[t].value=r,D+=e.orders[t].value,e.orders[t].accum_value=D.toFixed(2),I+=e.orders[t].quantity,e.orders[t].position=I;var a=e.orders[t].price*e.orders[t].position-e.orders[t].accum_value;e.orders[t].current_pnl=a.toFixed(2),o.xorders.push(e.orders[t]);var n=e.orders[t].trade_date+" "+e.orders[t].time.substring(5,0);S.includes(n)||S.push(n),k.some((function(r){return r.id==e.orders[t].id}))||k.push(e.orders[t])}};for(var w in e.orders)N(w);return sessionStorage.setItem("dtimes_process",JSON.stringify(S)),sessionStorage.setItem("dt_orders_process",JSON.stringify(k)),n.a.createElement("div",{className:"container"},n.a.createElement("h4",null,"Leg ",e.indx+1),n.a.createElement(h.a,{keyField:e.name,data:o.xorders,columns:o.xcolumns}),n.a.createElement(R,{current:e.name}))}}function R(e){var t=Object(a.useState)({ycolumns:[{dataField:"date",text:"Date"},{dataField:"time",text:"Time"},{dataField:"running_pnl",text:"Running PnL"}],xrows:[],labels:[],datasets:[{label:"Running PnL",fill:!0,lineTension:0,backgroundColor:"rgba(0,128,0,0.5)",borderColor:"rgba(0,0,0,1)",borderWidth:1,data:[]}]}),r=Object(j.a)(t,2),o=r[0],i=(r[1],!1),s=JSON.parse(sessionStorage.getItem("groups_ready")),d=(sessionStorage.getItem("dt_groups_process"),s.indexOf(e.current));if(console.log(e.current,d),d==s.length-1&&(i=!0),i){var l=JSON.parse(sessionStorage.getItem("dtimes_process")),c=JSON.parse(sessionStorage.getItem("dt_orders_process"));o.labels=l;for(var u=l.length,m=0;m<u;m++){for(var p=c.length,_=0,g=0;g<p;g++){c[g].trade_date+" "+c[g].time.substring(5,0)==l[m]&&(_+=parseFloat(c[g].current_pnl))}var f=l[m].split(" "),v={date:f[0],time:f[1],running_pnl:100*_.toFixed(2)};o.xrows.push(v),o.datasets[0].data.push(v.running_pnl)}return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12"},n.a.createElement("h4",null,"Running PnL Table Form"),n.a.createElement(h.a,{keyField:e.name+"r",data:o.xrows,columns:o.ycolumns})),n.a.createElement("div",{className:"col-md-12"},n.a.createElement("div",{className:"row"},n.a.createElement(k.a,{data:o,options:{title:{display:!0,text:"Running PnL Chart",fontSize:20},legend:{display:!0,position:"bottom"}}}))))}return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12"},n.a.createElement("hr",null)))}var G=function(e){return Object(l.b)(H(),e)},W=function(e,t,r,a){return Object(l.b)(M(),e,t,r,a)},A=function(){var e=Object(a.useState)({orders:[],columns:[{dataField:"id",text:"ID"},{dataField:"symbol",text:"Symbol"},{dataField:"strike",text:"Strike"},{dataField:"exp_date",text:"Exp Date"},{dataField:"trade_date",text:"Date"},{dataField:"time",text:"Time"},{dataField:"price",text:"Price"},{dataField:"call_put",text:"Call/Put"},{dataField:"quantity",text:"Quantity"},{dataField:"value",text:"Value"},{dataField:"current_pnl",text:"Current PnL"}],groups:[],dataGroups:{},filldata:{},iPrices:[]}),t=Object(j.a)(e,2),r=t[0],o=(t[1],Object(_.g)().trade_id);console.log("Componente renderizado"),console.log("PARAM",o);var i=Object(c.a)();sessionStorage.setItem("groups_ready",JSON.stringify([])),sessionStorage.setItem("dtimes_process",JSON.stringify([])),sessionStorage.setItem("dt_orders_process",JSON.stringify([]));var s=JSON.parse(sessionStorage.getItem("trad_info"));return console.log("trad_info",s),Object(a.useEffect)((function(){i.query({query:W("700","C","2020-01-30T15:43:08Z","2020-01-30T15:49:08Z")}).then((function(e){r.iPrices=e.data.intraday_price_action})).catch((function(e){return console.error(e)}))})),n.a.createElement(E.a,{query:G(o)},(function(e){var t=e.loading,a=e.error,i=e.data;if(t)return n.a.createElement("div",null,"Buscando data");if(a)return n.a.createElement("div",null,"Ha ocurrido un error: ",a);if(i){console.log("Data: ",i);var d=sessionStorage.getItem("dtimes_process")&&JSON.parse(sessionStorage.getItem("dtimes_process")).length?JSON.parse(sessionStorage.getItem("dtimes_process")):[],l=sessionStorage.getItem("dt_orders_process")&&JSON.parse(sessionStorage.getItem("dt_orders_process")).length?JSON.parse(sessionStorage.getItem("dt_orders_process")):[];sessionStorage.setItem("dtimes_process",JSON.stringify(d)),sessionStorage.setItem("dt_orders_process",JSON.stringify(l)),r.orders=i.orders;for(var c=i.orders.length,u=0;u<c;u++){var p=r.orders[u].strike+r.orders[u].exp_date+r.orders[u].call_put;r.groups.includes(p)||r.groups.push(p),r.dataGroups.hasOwnProperty(p)||(r.dataGroups[p]=[]),r.dataGroups[p].push(r.orders[u])}var _=r.groups.length;sessionStorage.setItem("dt_groups_process",_);for(var g=0;g<_;g++){var f=r.dataGroups[r.groups[g]];if(r.filldata[r.groups[g]]=[],f.length)for(var v=m()(f[0].trade_date+" "+f[0].time,"DD-MM-YYYY HH:mm:ss"),b=m()(f[_-1].trade_date+" "+f[_-1].time,"DD-MM-YYYY HH:mm:ss").diff(v,"minutes"),y=1;y<b;y++){var E=m()(f[0].time,"h:m:s").add(y,"minutes").format("HH:mm:ss"),x={id:f[0].id+"."+y,strike:f[0].strike,action:f[0].action,call_put:f[0].call_put,exp_date:f[0].exp_date,price:"",is_open:f[0].is_open,trade_date:f[0].trade_date,time:E,quantity:0};r.filldata[r.groups[g]].push(x)}}for(var O=0;O<_;O++){var F=r.dataGroups[r.groups[O]].concat(r.filldata[r.groups[O]]);F.sort((function(e,t){return new Date(e.trade_date+" "+e.time)-new Date(t.trade_date+" "+t.time)})),r.dataGroups[r.groups[O]]=F}return r.iPrices.length?n.a.createElement("div",{className:"container"},r.groups.map((function(e){return n.a.createElement(h.a,{keyField:e,data:r.dataGroups[e],columns:r.columns})}))):n.a.createElement("div",{className:"container"},n.a.createElement("ul",null,n.a.createElement("li",{keyField:"trade_id"},"ID: ",o),s?n.a.createElement(n.a.Fragment,null,n.a.createElement("li",{keyField:"return_dollar"},"Return Dollar: ",s.return_dollar),n.a.createElement("li",{keyField:"return_percentage"},"Return Percentage: ",s.return_percentage),n.a.createElement("li",{keyField:"id_reference"},"Reference ID: ",s.id_reference)):""),r.groups.map((function(e,t){return n.a.createElement(T,{name:e,indx:t,orders:r.dataGroups[e]})})))}}))};function B(){var e=Object(s.a)(["\n\t  {\n\t    orders(where: {trade_id: {_eq: ","}}, order_by: {trade_date: asc, time: asc}) {\n\t      \tid\n\t      \tstrike\n\t     \ttime\n\t      \ttrade_date\n\t      \tcall_put\n\t      \taction\n\t      \texp_date\n\t     \tprice\n\t      \tis_open\n\t    \tquantity\n\t    }\n\t  }\n\t"]);return B=function(){return e},e}var U=function(e){Object(v.a)(r,e);var t=Object(b.a)(r);function r(e){return Object(g.a)(this,r),t.call(this,e)}return Object(f.a)(r,[{key:"componentDidMount",value:function(){console.log("trade_id_param",this.props.match.params.trade_id);var e=Object(c.c)(V(this.props.match.params.trade_id)),t=e.loading,r=e.error,a=e.data;return t?n.a.createElement("p",null,"Loading..."):r?n.a.createElement("p",null,"Error :("):void(a&&console.log(a))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("h1",null,"Hello World!"))}}]),r}(n.a.Component),V=function(e){return Object(l.b)(B(),e)},Z=U;function Q(){var e=Object(s.a)(["\n        {\n          orders(where: {trade_id: {_eq: 266}}, order_by: {trade_date: asc, time: asc}) {\n            id\n            strike\n            time\n            trade_date\n            call_put\n            action\n            exp_date\n            price\n            is_open\n          }\n        }\n      "]);return Q=function(){return e},e}function z(){var e=Object(s.a)(['\n  {\n    intraday_price_action(where: {strike: {_eq: "','"}, call_put: {_eq: "','"}, date_time: {_gte: "','"}, _and: {date_time: {_lte: "','"}}}, order_by: {trade_date: asc, time: asc}) {\n      trade_date\n      time\n      call_put\n      exp_date\n      close\n    }\n  }\n']);return z=function(){return e},e}function $(){var e=Object(s.a)(["\n  {\n    orders(where: {trade_id: {_eq: 266}}, order_by: {trade_date: asc, time: asc}) {\n      id\n      strike\n      time\n      trade_date\n      call_put\n      action\n      exp_date\n      price\n      is_open\n    }\n  }\n"]);return $=function(){return e},e}var K=new l.a({uri:"https://auto-alpha-db.herokuapp.com/v1/graphql"}),X=Object(l.b)($());function ee(){var e=Object(c.c)(X),t=e.loading,r=e.error,a=e.data;if(t)return n.a.createElement("p",null,"Loading...");if(r)return n.a.createElement("p",null,"Error :(");console.log(a);var o=m()("20/06/2020 12:00:00","DD/MM/YYYY HH:mm:ss"),i=m()("25/06/2020 12:00:00","DD/MM/YYYY HH:mm:ss");return console.log(i.diff(o,"minutes")),n.a.createElement("h2",null,"About")}function te(){return K.query({query:Object(l.b)(Q())}).then((function(e){return console.log(e)})).catch((function(e){return console.error(e)})),n.a.createElement("h2",null,"Welcome")}function re(){var e,t,r,a,o=Object(c.c)((e="700",t="C",r="2020-01-30T15:43:08Z",a="2020-01-30T15:49:08Z",Object(l.b)(z(),e,t,r,a))),i=o.loading,s=o.error,d=o.data;return i?n.a.createElement("p",null,"Loading..."):s?n.a.createElement("p",null,"Error :("):(console.log("Data 2",d),n.a.createElement("h2",null,"About2"))}var ae=function(){return n.a.createElement(d.a,{client:K},n.a.createElement("div",null,n.a.createElement(p.a,null,n.a.createElement(_.c,null,n.a.createElement(_.a,{exact:!0,path:"/",component:N}),n.a.createElement(_.a,{path:"/orders/:trade_id",component:A}),n.a.createElement(_.a,{path:"/ordenes/:trade_id",component:Z}),n.a.createElement(_.a,{path:"/tables",component:S}),n.a.createElement(_.a,{path:"/about",component:ee}),n.a.createElement(_.a,{path:"/about2",component:re}),n.a.createElement(_.a,{path:"/welcome",component:te}),n.a.createElement(_.a,{path:"/links",component:Y})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(242);i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[102,1,2]]]);
//# sourceMappingURL=main.949a2217.chunk.js.map